# Security Workflow Setup

> **Language:** üá∑üá∫ –†—É—Å—Å–∫–∏–π | [üá∫üá∏ English](./SECURITY_SETUP_EN.md)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ `vue3-truncate-html`.

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–≤–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç** - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. **–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI** - –±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º PR

## üîí –ï–∂–µ–º–µ—Å—è—á–Ω—ã–π Security Audit

### –û–ø–∏—Å–∞–Ω–∏–µ

Workflow `security-audit.yml` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–≤–æ–≥–æ —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞ –≤ 09:00 UTC –∏ –≤–∫–ª—é—á–∞–µ—Ç:

- **npm audit** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
- **Snyk scanning** - —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **CodeQL analysis** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** - –ø–æ–∏—Å–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ hardcoded secrets** - –ø–æ–∏—Å–∫ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Snyk (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Snyk –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ secrets:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [snyk.io](https://snyk.io)
2. –ü–æ–ª—É—á–∏—Ç–µ API —Ç–æ–∫–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç `SNYK_TOKEN` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   - GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
   - New repository secret: `SNYK_TOKEN`

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞–µ—Ç issue –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∫–∞–∫ artifact
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Security tab

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

Workflow –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions ‚Üí Security Audit
2. –ù–∞–∂–º–∏—Ç–µ "Run workflow"
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ç–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

## üõ°Ô∏è –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ CI

### –û–ø–∏—Å–∞–Ω–∏–µ

–í –æ—Å–Ω–æ–≤–Ω–æ–º CI workflow (`ci.yml`) –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

- **npm audit** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- **Sensitive files check** - –ø–æ–∏—Å–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **Hardcoded secrets check** - –ø–æ–∏—Å–∫ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ **–£—Å–ø–µ—Ö** - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã, PR –º–æ–∂–Ω–æ –º–µ—Ä–∂–∏—Ç—å
- ‚ùå **–û—à–∏–±–∫–∞** - –Ω–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç—ã

### –ì–¥–µ –Ω–∞–π—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. **Actions tab** - –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow
2. **Security tab** - CodeQL —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ security advisories
3. **Issues** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ issue –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º
4. **Artifacts** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (—Ö—Ä–∞–Ω—è—Ç—Å—è 30 –¥–Ω–µ–π)

### –¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤

- **security-audit-report** - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞
- **CodeQL results** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **Dependency alerts** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —É—è–∑–≤–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### npm audit

–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: `moderate` (—Å—Ä–µ–¥–Ω–∏–π –∏ –≤—ã—à–µ)

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:

```yaml
# –î–ª—è CI (–±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
pnpm audit --audit-level=moderate

# –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞
npm audit --audit-level=low  # –≤—Å–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
npm audit --audit-level=high # —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
```

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è

–î–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π —Å–æ–∑–¥–∞–π—Ç–µ `.npmrc`:

```ini
# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ advisory ID
audit-level=moderate
```

## üö® –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **Issue —Å–æ–∑–¥–∞–µ—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º
2. **PR –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
3. **–û—Ç—á–µ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** –∫–∞–∫ artifact –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –†—É—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ issue** - –∏–∑—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
2. **–û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - `pnpm update` –∏–ª–∏ `pnpm audit fix`
3. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥** - —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ workflow –ø–æ–≤—Ç–æ—Ä–Ω–æ

## üìã –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

- [ ] –í—Å–µ security checks –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö security issues
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] CodeQL —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

### –†–µ–≥—É–ª—è—Ä–Ω–æ

- [ ] –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- [ ] –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ security advisories
- [ ] –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.github/workflows/security-audit.yml`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —à–∞–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –û–±–Ω–æ–≤–∏—Ç–µ –æ—Ç—á–µ—Ç –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞:

```yaml
schedule:
  # –ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
  - cron: '0 9 * * 1'
  
  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 02:00
  - cron: '0 2 * * *'
  
  # –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü 15 —á–∏—Å–ª–∞
  - cron: '0 9 15 * *'
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ security workflow:

1. –°–æ–∑–¥–∞–π—Ç–µ issue —Å —Ç–µ–≥–æ–º `security`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `SECURITY.md`
3. –ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ Actions tab

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: $(date +%Y-%m-%d) 
